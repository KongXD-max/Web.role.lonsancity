<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>สมัครสมาชิก - ScriptAcademy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
      /* ใช้ฟอนต์ Kanit เพื่อให้เข้ากับดีไซน์ภาษาไทย */
      @import url('https://fonts.googleapis.com/css2?family=Kanit&display=swap');
      *{font-family: 'Kanit', sans-serif;}

      /* พื้นหลังตามภาพต้นฉบับ */
      body {
        background-image: linear-gradient(to right top, #d16ba5, #c777b9, #ba83ca, #aa8fd8, #9a9ae1, #8aa7ec, #79b3f4, #69bff8, #52cffe, #41dfff, #46eefa, #5ffbf1);
      }
      
      /* สไตล์สำหรับคอนเทนเนอร์หลักและรูปภาพ */
      .auth-container {
        width: 80%; 
        max-width: 900px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }
      .register-image-container {
        padding: 20px;
      }
      .register-image-container img {
        max-width: 100%;
        height: auto;
        display: block;
        object-fit: cover;
      }

      /* สไตล์ตามดีไซน์ในภาพ: ปุ่มสีฟ้า/เขียว (info) */
      .btn-info {
        background-color: #20c997 !important; /* ปรับให้เป็นสีเขียวฟ้าตามรูป */
        border-color: #20c997 !important;
      }
      .text-info {
        color: #20c997 !important;
      }

      /* สไตล์สำหรับช่องกรอกข้อมูล */
      .input-group-text {
        background-color: #f8f9fa; /* สีพื้นหลังไอคอน */
        color: #20c997; /* สีไอคอน */
        border-right: none;
      }
      .form-control {
        border-left: none;
        border-radius: 0.25rem;
        transition: all 0.2s;
      }
      .form-control:focus {
        border-color: #20c997;
        box-shadow: 0 0 0 0.25rem rgba(32, 201, 151, 0.25);
      }
      .validation-feedback {
        color: red;
        font-size: 0.85em;
        margin-top: 5px;
      }
    </style>
  </head>
  <body class="d-flex justify-content-center align-items-center vh-100">
    
    <div class="row bg-white rounded-5 auth-container"> 
      
      <div class="col-md-6 d-none d-md-flex justify-content-center align-items-center register-image-container">
        <img src="images/code_background.jpg" alt="Coding Background" class="img-fluid rounded-4"> 
      </div>

      <div class="col-md-6 p-5">
        <div class="text-center">
             <i class="fa-solid fa-user-plus fa-5x text-info"></i>
        </div>
        <div class="text-center fs-2 fw-bold mb-4">สมัครสมาชิก</div>
        
        <form id="registerForm">
            <div class="input-group">
                <div class="input-group-text"><i class="fa-solid fa-user"></i></div>
                <input class="form-control bg-light" type="text" id="regUsername" placeholder="ชื่อผู้ใช้" required>
            </div>
            <div id="regUsernameFeedback" class="validation-feedback"></div>

            <div class="input-group mt-3">
                <div class="input-group-text"><i class="fa-solid fa-envelope"></i></div>
                <input class="form-control bg-light" type="email" id="regEmail" placeholder="อีเมล" required>
            </div>
            <div id="regEmailFeedback" class="validation-feedback"></div>

            <div class="input-group mt-3">
                <div class="input-group-text"><i class="fa-solid fa-lock"></i></div>
                <input class="form-control bg-light" type="password" id="regPassword" placeholder="รหัสผ่าน" required>
            </div>
            <div id="regPasswordFeedback" class="validation-feedback"></div>

            <div class="input-group mt-3">
                <div class="input-group-text"><i class="fa-solid fa-lock-open"></i></div>
                <input class="form-control bg-light" type="password" id="regConfirmPassword" placeholder="ยืนยันรหัสผ่าน" required>
            </div>
            <div id="regConfirmPasswordFeedback" class="validation-feedback"></div>

            <button type="submit" class="btn btn-info text-white w-100 mt-4 fs-5">สมัครสมาชิก</button>
        </form>
        
        <div class="text-center mt-3">
            มีบัญชีอยู่แล้ว? <a href="login.html" class="text-info text-decoration-none fw-bold">ลงชื่อเข้าใช้ที่นี่</a>
        </div>
      </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
    <script>
      // --- การตรวจสอบฟอร์มสมัครสมาชิก (Register Validation) ---
      const regForm = document.getElementById('registerForm');
      // กำหนดเงื่อนไข
      const MIN_USERNAME_LENGTH = 5;
      const MIN_PASSWORD_LENGTH = 8;
      const PASSWORD_REGEX = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).*$/; // ต้องมี A-Z, a-z, และตัวเลขอย่างน้อย 1 ตัว

      regForm.addEventListener('submit', function(event) {
          event.preventDefault();
          
          const username = document.getElementById('regUsername').value;
          const password = document.getElementById('regPassword').value;
          const confirmPassword = document.getElementById('regConfirmPassword').value;
          let isValid = true;

          // ฟังก์ชันช่วยแสดง feedback
          const setFeedback = (elementId, message) => {
              document.getElementById(elementId).textContent = message;
              if (message) isValid = false;
          };
          
          // Reset Feedback
          setFeedback('regUsernameFeedback', '');
          setFeedback('regEmailFeedback', '');
          setFeedback('regPasswordFeedback', '');
          setFeedback('regConfirmPasswordFeedback', '');

          // ตรวจสอบ Username
          if (username.length < MIN_USERNAME_LENGTH) {
              setFeedback('regUsernameFeedback', `* ชื่อผู้ใช้ต้องมีความยาวอย่างน้อย ${MIN_USERNAME_LENGTH} ตัวอักษร`);
          }

          // ตรวจสอบ Password
          if (password.length < MIN_PASSWORD_LENGTH) {
              setFeedback('regPasswordFeedback', `* รหัสผ่านต้องมีความยาวอย่างน้อย ${MIN_PASSWORD_LENGTH} ตัวอักษร`);
          } else if (!PASSWORD_REGEX.test(password)) {
              setFeedback('regPasswordFeedback', '* รหัสผ่านต้องมีตัวอักษรใหญ่, ตัวอักษรเล็ก และตัวเลข อย่างน้อยอย่างละ 1 ตัว');
          }

          // ตรวจสอบยืนยันรหัสผ่าน
          if (password !== confirmPassword) {
              setFeedback('regConfirmPasswordFeedback', '* รหัสผ่านทั้งสองช่องไม่ตรงกัน');
          }

          // ถ้าทุกอย่างถูกต้อง (จำลองการสมัครสำเร็จ)
          if (isValid) {
              alert('✔️ สมัครสมาชิกสำเร็จ! ข้อมูลของคุณได้รับการบันทึกแล้ว (ในทางทฤษฎี)');
              // ส่งผู้ใช้ไปหน้าล็อกอิน
              window.location.href = 'login.html'; 
          }
      });
    </script>
  </body>
</html>
